<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gaidy Blog | linux 大盘点</title>
    <meta name="description" content="知识在于积累 滴水可穿石">
    <link rel="icon" href="logo.ico">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.db479b62.css" as="style"><link rel="preload" href="/Blog/assets/js/app.b978a6c9.js" as="script"><link rel="preload" href="/Blog/assets/js/2.11fec989.js" as="script"><link rel="prefetch" href="/Blog/assets/js/4.9d74c53a.js"><link rel="prefetch" href="/Blog/assets/js/1.7776ef1f.js"><link rel="prefetch" href="/Blog/assets/js/3.01cf74d5.js"><link rel="prefetch" href="/Blog/assets/js/5.4bb40821.js"><link rel="prefetch" href="/Blog/assets/js/6.953b7f86.js"><link rel="prefetch" href="/Blog/assets/js/7.b8336b8d.js"><link rel="prefetch" href="/Blog/assets/js/8.c96fc0e4.js"><link rel="prefetch" href="/Blog/assets/js/9.8ae8702c.js"><link rel="prefetch" href="/Blog/assets/js/10.d5705150.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.db479b62.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/Blog/" class="home-link router-link-active"><!----><span class="site-name">
      Gaidy Blog
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><a href="https://github.com/Jiazhi-Lin/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><a href="https://github.com/Jiazhi-Lin/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>读书笔记</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>服务器</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/Blog/src/tech/linux.html" class="active sidebar-link">linux 大盘点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#linux-大盘点" class="sidebar-link">linux 大盘点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#linux-用户权限" class="sidebar-link">linux 用户权限</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#展示文件的属性-ls-al" class="sidebar-link">展示文件的属性 &gt;&gt;&gt; ls -al</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#改变文件属性与权限" class="sidebar-link">改变文件属性与权限</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#linux-文件系统-hfs" class="sidebar-link">linux 文件系统 HFS</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#查看文件" class="sidebar-link">查看文件</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#磁盘处理" class="sidebar-link">磁盘处理</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#查找文件" class="sidebar-link">查找文件</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#文件压缩" class="sidebar-link">文件压缩</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#vi-常用操作" class="sidebar-link">vi 常用操作</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#bash-linux-main-shell-bin-bash" class="sidebar-link">Bash --- linux main shell [/bin/bash]</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#数据流重定向" class="sidebar-link">数据流重定向</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#管道常用" class="sidebar-link">管道常用</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#grep-高级用法" class="sidebar-link">grep 高级用法</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#sed-工具" class="sidebar-link">sed 工具</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#shell" class="sidebar-link">shell</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#linux-用户及用户组" class="sidebar-link">linux 用户及用户组</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#进程" class="sidebar-link">进程</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#查看系统资源" class="sidebar-link">查看系统资源</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#selinux" class="sidebar-link">SELinux</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#daemon" class="sidebar-link">daemon</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#服务的防火墙" class="sidebar-link">服务的防火墙</a></li><li class="sidebar-sub-header"><a href="/Blog/src/tech/linux.html#查看系统的服务" class="sidebar-link">查看系统的服务</a></li></ul></li></ul></li><li><a href="/Blog/src/tech/docker.html" class="sidebar-link">docker 心路历程</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>css杂烩</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>js小视</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>node工具</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>vue组件及小记</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h2 id="linux-大盘点"><a href="#linux-大盘点" aria-hidden="true" class="header-anchor">#</a> linux 大盘点</h2><h3 id="linux-用户权限"><a href="#linux-用户权限" aria-hidden="true" class="header-anchor">#</a> linux 用户权限</h3><ul><li>linux 中每个文件都有三个身份 user group other root【最大的权限】</li><li>用户相关信息存放：/etc/passwd</li><li>个人密码存放: /etc/shadow</li><li>所有组名存放: /etc/group</li></ul><h3 id="展示文件的属性-ls-al"><a href="#展示文件的属性-ls-al" aria-hidden="true" class="header-anchor">#</a> 展示文件的属性 &gt;&gt;&gt; ls -al</h3><p><code>drwxr-xr-x 2 root root 4096 May 20 00:30 btrace_test</code></p><table><thead><tr><th>权限</th><th>连接</th><th>所有者</th><th>用户组</th><th>文件容量</th><th>修改日期</th><th>文件名</th></tr></thead><tbody><tr><td>drwxr-xr-x</td><td>2</td><td>root</td><td>root</td><td>4096</td><td>May 20 00:30</td><td>btrace_test</td></tr></tbody></table><table><thead><tr><th>权限 10 位</th><th>意义</th></tr></thead><tbody><tr><td>第一位字符：d,-,l,b,c</td><td>目录，文件，连接文件，可提供存储的设备接口，串行端口设备</td></tr><tr><td>2-4 位</td><td>文件所有者权限</td></tr><tr><td>5-7 位</td><td>同用户组权限</td></tr><tr><td>8-10 位</td><td>其他用户组或用户权限</td></tr><tr><td>wxr</td><td>可读、可写、可执行 权值 7</td></tr><tr><td>r-x</td><td>可读、不可写，可执行 权值 5</td></tr><tr><td>r--</td><td>可读、不可写，不可执行 权值 4</td></tr><tr><td>w</td><td>写的权限 权值 2</td></tr><tr><td>r</td><td>读的权限 权值 4</td></tr><tr><td>x</td><td>执行的权限 权值 1</td></tr></tbody></table><h3 id="改变文件属性与权限"><a href="#改变文件属性与权限" aria-hidden="true" class="header-anchor">#</a> 改变文件属性与权限</h3><table><thead><tr><th>指令</th><th>功能</th><th>使用</th></tr></thead><tbody><tr><td>chgrp</td><td>改变文件所属用户组</td><td>chgrp -R[递归改变文件夹下所有文件] group[存在于 /etc/group] [文件夹路径或者文件名]</td></tr><tr><td>chown</td><td>改变文件所有者</td><td>chown -R[递归改变文件夹下所有文件] user or user:group[存在于 /etc/passwd] [文件夹路径或者文件名]</td></tr><tr><td>chmod</td><td>改变文件权限</td><td>chmod -R[递归改变文件夹下所有文件] [总权值] [文件夹路径或者文件名]</td></tr></tbody></table><h3 id="linux-文件系统-hfs"><a href="#linux-文件系统-hfs" aria-hidden="true" class="header-anchor">#</a> linux 文件系统 HFS</h3><table><thead><tr><th>目录</th><th>功能</th></tr></thead><tbody><tr><td>/bin</td><td>开机最基础的指令</td></tr><tr><td>/boot</td><td>开机使用文件</td></tr><tr><td>/etc</td><td>重要的配置文件 [/etc/init.d/: 所有服务的默认启动脚本]</td></tr><tr><td>/home</td><td>系统默认主文件夹 一般是一个用户有一个专属的文件夹 ~：目前这个用户的主文件夹</td></tr><tr><td>/lib</td><td>开机时使用的主函数库</td></tr><tr><td>/media</td><td>可删除的设备</td></tr><tr><td>/mnt</td><td>用于暂时挂载设备的文件夹</td></tr><tr><td>/opt</td><td>第三方软件的安装目录</td></tr><tr><td>/root</td><td>root 的主文件夹 root模式下 cd ~ 会到这个文件夹下</td></tr><tr><td>/sbin</td><td>提供开机，系统维护，其他软件程序的指令</td></tr><tr><td>/srv</td><td>一些网络服务启动的时候，提供数据服务的数据目录，可以放项目</td></tr><tr><td>/tmp</td><td>暂时存放的文件 任何人都可以访问</td></tr><tr><td>/lost+found</td><td>文件系统发生错误时才会产生，丢失的片段会放到这个文件夹里面</td></tr><tr><td>/proc</td><td>存放进程的目录，存放的时候会被读到内存中</td></tr><tr><td>/sys</td><td>记录与内核相关的信息</td></tr><tr><td>/usr</td><td>可分享与不可变动</td></tr><tr><td>/usr/X11R6/</td><td>X window 系统重要数据所防止的目录</td></tr><tr><td>/usr/bin</td><td>绝大部分可用指令的存放</td></tr><tr><td>/usr/include/</td><td>c/c++ 程序语言头文件与包含文件放置处</td></tr><tr><td>/usr/lib/</td><td>各个应用软件的函数库、目标文件，不经常使用的脚本</td></tr><tr><td>/usr/local/</td><td>系统管理员在本机自行安装自己下载的软件</td></tr><tr><td>/usr/sbin/</td><td>非系统运行所需的指令，常见就是下载软件的执行指令</td></tr><tr><td>/usr/share/</td><td>放置共享文件的地方 所有人可见</td></tr><tr><td>/usr/src/</td><td>放置一般源码</td></tr><tr><td>/var</td><td>针对经常变化的文件 缓存 log 登录文件</td></tr><tr><td>/var/cache/</td><td>系统运行的暂存文件</td></tr><tr><td>/var/lib/</td><td>各个软件的数据目录</td></tr><tr><td>/var/lock/</td><td>文件或者软件上锁文件</td></tr><tr><td>/var/log/</td><td>登录文件，记录登录者的信息啊啥的</td></tr><tr><td>/var/mail/</td><td>个人电子邮箱</td></tr><tr><td>/var/run/</td><td>某些程序或者服务的 pid</td></tr><tr><td>/var/spool/</td><td>队列数据，比如邮箱收到的邮件</td></tr></tbody></table><h3 id="变量"><a href="#变量" aria-hidden="true" class="header-anchor">#</a> 变量</h3><ul><li>$PATH,, 在执行指令时 系统会去$PATH里面查找目标路径bin相关的路径下是否有对应的可执行文件，有的话就直接拿那个路径拼上指令 比如 <code>cat min =&gt; /root/cat min</code></li><li><code>cp -ir srcDir destDir</code> 注意复制文件的文件权限问题</li><li><code>rm -rif file|dir</code> -f 就是强制的意思</li><li><code>mv -fiu file</code> -u 是在文件有变化的时候才执行 -f 强制覆盖 <code>mv test1 test2</code>重命名</li><li><code>cat -n | tac -n</code></li><li><code>more</code></li></ul><h3 id="查看文件"><a href="#查看文件" aria-hidden="true" class="header-anchor">#</a> 查看文件</h3><ul><li><code>tail -f file | grep filterString</code> 查看实时日志并过滤</li><li><code>less | more</code></li><li><code>ln -s src dest</code> 创建文件或者文件夹快捷方式</li></ul><h3 id="磁盘处理"><a href="#磁盘处理" aria-hidden="true" class="header-anchor">#</a> 磁盘处理</h3><ol><li>先用 <code>df -h</code> 找出当前系统可用的磁盘</li><li>...</li></ol><h3 id="查找文件"><a href="#查找文件" aria-hidden="true" class="header-anchor">#</a> 查找文件</h3><ul><li>whereis -b[查找可执行文件] fileName</li><li>locate -i[忽略大小写] -r[使用正则] filename</li><li>find [path:用空格可以从多个目录开始查找] [option:可以查找用户名或者用户组相关的常用的 -name filename | -type d] [action:找到的路径进行的操作 -exec commond | -print]</li></ul><h3 id="文件压缩"><a href="#文件压缩" aria-hidden="true" class="header-anchor">#</a> 文件压缩</h3><ul><li><code>gzip -9 -c -v fikename &gt; filename.gz</code> 保留原文件</li><li><code>zcat filename.gz</code> 查看压缩文件内容</li><li><code>tar -zcpv -f filename.tar.gz tarDir</code> 将文件夹打包压缩 <code>--exclude=/root/sys*</code> 不包含 /root/sys 的所有文件</li><li><code>tar -ztv -f filename.tar.gz</code> 查看</li><li><code>tar -zxv -f filename.tar.gz -C untarDir</code> 解压缩到指定文件夹</li></ul><h3 id="vi-常用操作"><a href="#vi-常用操作" aria-hidden="true" class="header-anchor">#</a> vi 常用操作</h3><table><thead><tr><th>按键</th><th>说明</th></tr></thead><tbody><tr><td>一般模式下</td><td>--</td></tr><tr><td>0</td><td>光标移动到该行第一个</td></tr><tr><td>$</td><td>光标移动到该行最后一个</td></tr><tr><td>G</td><td>光标移动到最后一行</td></tr><tr><td>nG</td><td>移动到第几行</td></tr><tr><td>gg</td><td>光标移动到第一行</td></tr><tr><td>/key</td><td>查找关键字为 key 的字符并高亮</td></tr><tr><td>:n1,n2s/key1/key2/g</td><td>在n1行和n2行之间查找key1并替换为key2</td></tr><tr><td>:1,$s/key1/key2/g</td><td>在1行和最后行之间查找key1并替换为key2</td></tr><tr><td>dd</td><td>删除一整行</td></tr><tr><td>ndd</td><td>删除光标下n行</td></tr><tr><td>yy</td><td>复制光标行</td></tr><tr><td>p</td><td>粘贴复制的东西到下一行</td></tr><tr><td>.</td><td>重复上一个擦欧洲哦</td></tr><tr><td>:w[filename]</td><td>另存为</td></tr><tr><td>y</td><td>复制反白的文字或块</td></tr><tr><td>d</td><td>删除反白的文字或块</td></tr><tr><td>Ctrl+v</td><td>块选择</td></tr><tr><td>:sp [filename]</td><td>多窗口打开同一个文件（不填写filename）或多个文件</td></tr><tr><td>ctrl + w + 箭头</td><td>转移多窗口光标</td></tr><tr><td>~/.vimrc, ~/.viminfo</td><td>vim 环境设置与记录</td></tr></tbody></table><h3 id="bash-linux-main-shell-bin-bash"><a href="#bash-linux-main-shell-bin-bash" aria-hidden="true" class="header-anchor">#</a> Bash --- linux main shell [/bin/bash]</h3><blockquote><p>gitlab runner 里面的起的 docker 默认是使用 /bin/sh 这个 shell</p></blockquote><blockquote><p>alias la=&quot;ls -al&quot;</p></blockquote><table><thead><tr><th>变量</th><th>说明</th></tr></thead><tbody><tr><td>环境变量</td><td>PATH=&quot;$PATH&quot;:/home/bin [追加] export PATH [导出到全局]</td></tr><tr><td>普通变量</td><td>varName=./home/jiazhi [一般用来设置路径]</td></tr><tr><td>env</td><td>查看环境变量</td></tr><tr><td>set</td><td>查看所有变量</td></tr><tr><td>daclare</td><td>声明变量类型</td></tr><tr><td>alias</td><td>alias lm='ls -s</td></tr></tbody></table><h4 id="路径的查找顺序"><a href="#路径的查找顺序" aria-hidden="true" class="header-anchor">#</a> 路径的查找顺序</h4><ol><li>以相对或者绝对路径的执行命令</li><li>alias 的命令</li><li>bash 的内置 buildin 命令、</li><li>$PATH 查找</li></ol><h4 id="bash-配置详情"><a href="#bash-配置详情" aria-hidden="true" class="header-anchor">#</a> bash 配置详情</h4><table><thead><tr><th>文件</th><th>header 2</th></tr></thead><tbody><tr><td>环境设置</td><td>---</td></tr><tr><td>/etc/profile</td><td>每个用户登录时取得bash将读取的配置</td></tr><tr><td>PATH MAIL USER HOSTNAME HISTORY</td><td>/etc/profile 中的各个字段 因为针对不同的用户 所以里面的各个字段都不一样</td></tr><tr><td>/etc/inputrc</td><td>用户输入相关的</td></tr><tr><td>/etc/profile.d/*.sh</td><td>下的所有 sh 文件都将被所有用户使用 用户设置共享的命令别名</td></tr><tr><td>/etc/sysconfig/i18n /</td><td>/etc/profile.d/lang.sh 会调用改文件设置环境变量的 LANG</td></tr><tr><td>登录获取的配置</td><td>---</td></tr><tr><td>~/.bash_profile</td><td>第一个会读取的配置 有则不会往下在找了 里面的代码会再去读取 ~/.bashrc 的配置</td></tr><tr><td>~/.bash_login</td><td>第二个会读取的配置 有则不会往下在找了</td></tr><tr><td>~/.profile</td><td>第三个会读取的配置 有则不会往下在找了</td></tr></tbody></table><h4 id="source-配置文件名-将配置读写进当前bash环境中"><a href="#source-配置文件名-将配置读写进当前bash环境中" aria-hidden="true" class="header-anchor">#</a><code>source 配置文件名</code> 将配置读写进当前bash环境中</h4><h3 id="数据流重定向"><a href="#数据流重定向" aria-hidden="true" class="header-anchor">#</a> 数据流重定向</h3><table><thead><tr><th>重定向符号</th><th>说明</th></tr></thead><tbody><tr><td>&gt;</td><td>以覆盖的方式写入文件 ll / &gt; ./filename [all]</td></tr><tr><td>&gt;&gt;</td><td>以追加的方式append内容进文件 [all]</td></tr><tr><td>1&gt; or 1&gt;&gt;</td><td>处理正确的数据</td></tr><tr><td>2&gt; or 2&gt;&gt;</td><td>处理错误的数据</td></tr><tr><td>&amp;&gt;</td><td>同时处理错误的和正确的数据</td></tr><tr><td>tee</td><td>双重定向 tee targetDir</td></tr></tbody></table><h3 id="管道常用"><a href="#管道常用" aria-hidden="true" class="header-anchor">#</a> 管道常用</h3><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>cut</td><td>切割 cut -d ':' -f 1 用‘：’切割并取出第一个</td></tr><tr><td>grep</td><td>grep -i --color=auto keyword targetDir</td></tr><tr><td>sort</td><td>sort -fb targetDir or sort -t ':' -k 3 以分隔符‘：’分割之后的第三位进行排序</td></tr><tr><td>xargs</td><td>find /sbin</td></tr></tbody></table><h3 id="grep-高级用法"><a href="#grep-高级用法" aria-hidden="true" class="header-anchor">#</a> grep 高级用法</h3><blockquote><p>就是使用高级表达式</p></blockquote><table><thead><tr><th>范例</th><th>说明</th></tr></thead><tbody><tr><td>grep -n 't[ea]st' filename</td><td>查找 test or tast</td></tr><tr><td>** '[^g]oo' **</td><td>没有g的oo</td></tr><tr><td>** '^the' **</td><td>首行是 the 的过滤</td></tr><tr><td>** '[:alpha:]' **</td><td>a-z and A-Z [a-zA-Z]</td></tr><tr><td>** '[:digit:]' **</td><td>所有数字 [0-9]</td></tr><tr><td>** '[:alnum:]' **</td><td>上面两个合体</td></tr><tr><td>** '[:lower:]' **</td><td>a-z</td></tr><tr><td>** '[:upper:]' **</td><td>A-Z</td></tr><tr><td>** '[:space:]' **</td><td>空格</td></tr><tr><td>** 'ooo.*' **</td><td>重复 o 0到无穷次</td></tr><tr><td>** 'go{n, m}' **</td><td>重复 n 到 m 次</td></tr></tbody></table><h3 id="sed-工具"><a href="#sed-工具" aria-hidden="true" class="header-anchor">#</a> sed 工具</h3><p><code>sed [-nefr] '[[n1[,n2]function(a,c,d,i,p,s)]]'</code></p><h3 id="shell"><a href="#shell" aria-hidden="true" class="header-anchor">#</a> shell</h3><h4 id="test-命令执行测试功能"><a href="#test-命令执行测试功能" aria-hidden="true" class="header-anchor">#</a> test 命令执行测试功能</h4><p><code>test -参数 express 简写 [ -参数 xxxxx ]</code></p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>数值对比</td><td>---</td></tr><tr><td>-eq</td><td>等于则为真</td></tr><tr><td>-ne</td><td>不等于则为真</td></tr><tr><td>-gt</td><td>大于则为真</td></tr><tr><td>-ge</td><td>大于等于则为真</td></tr><tr><td>-lt</td><td>小于则为真</td></tr><tr><td>-le</td><td>小于等于则为真</td></tr><tr><td>字符串判断</td><td>---</td></tr><tr><td>=</td><td>等于则为真</td></tr><tr><td>!=</td><td>不相等则为真</td></tr><tr><td>-z 字符串</td><td>字符串的长度为零则为真</td></tr><tr><td>-n 字符串</td><td>字符串的长度不为零则为真</td></tr><tr><td>文件判断</td><td>---</td></tr><tr><td>-e 文件名</td><td>如果文件存在则为真</td></tr><tr><td>-r 文件名</td><td>如果文件存在且可读则为真</td></tr><tr><td>-w 文件名</td><td>如果文件存在且可写则为真</td></tr><tr><td>-x 文件名</td><td>如果文件存在且可执行则为真</td></tr><tr><td>-s 文件名</td><td>如果文件存在且至少有一个字符则为真</td></tr><tr><td>-d 文件名</td><td>如果文件存在且为目录则为真</td></tr><tr><td>-f 文件名</td><td>如果文件存在且为普通文件则为真</td></tr><tr><td>-c 文件名</td><td>如果文件存在且为字符型特殊文件则为真</td></tr><tr><td>-b 文件名</td><td>如果文件存在且为块特殊文件则为真</td></tr><tr><td>多重判断</td><td>---</td></tr><tr><td>-a</td><td>两个条件同时成立 test -r file -a -x file</td></tr><tr><td>-o</td><td>任何一个条件成立</td></tr><tr><td>!</td><td>取反</td></tr></tbody></table><h4 id="命令行后接参数"><a href="#命令行后接参数" aria-hidden="true" class="header-anchor">#</a> 命令行后接参数</h4><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>$#</td><td>代表后接的参数个数</td></tr><tr><td>$@</td><td>代表 $1,$2</td></tr><tr><td>$*</td><td>&quot;$1 $2 $3&quot;</td></tr></tbody></table><pre class="language-text"><code>#!/bin/sh
basedir=$(dirname &quot;$(echo &quot;$0&quot; | sed -e 's,\\,/,g')&quot;)

case `uname` in
    *CYGWIN*) basedir=`cygpath -w &quot;$basedir&quot;`;;
esac


if [ -x &quot;$basedir/node&quot; ]; then
  &quot;$basedir/node&quot;  &quot;$basedir/node_modules/@yy/feb/bin/feb.js&quot; &quot;$@&quot;
  ret=$?
else
  node  &quot;$basedir/node_modules/@yy/feb/bin/feb.js&quot; &quot;$@&quot;
  ret=$?
fi
exit $ret
</code></pre><h3 id="linux-用户及用户组"><a href="#linux-用户及用户组" aria-hidden="true" class="header-anchor">#</a> linux 用户及用户组</h3><p><code>/etc/passwd ==&gt; root:x:0:0:root:/root:/bin/bash</code></p><p><code>用户：密码：uid：gid：用户基本信息明列：主文件夹：shell</code></p><p><code>/etc/shadow ==&gt; root:$6$h2SsCV8I$8uukYH4jvh2495yG2FLE6EDpbqwx9WMjXzUZ.DNQB2X1TQMQXo9kNgZ/lTVyAzmpO7gm8HALo2AvVzYH8nVFc1:17721:0:99999:7:::</code></p><p><code>账号名称：密码：最近变更日期时间戳：密码不可变动日期：密码需要更改的天数：密码更改前警告的天数：账号失效日期：保留字段</code></p><p><code>/etc/group =&gt; root:x:0:</code></p><p><code>用户组名称：用户组密码：gid：此用户支持的账户</code></p><table><thead><tr><th>相关指令</th><th>说明</th></tr></thead><tbody><tr><td>useradd [-u uid] [-g initGruop] [-G 2rdGroup]</td><td>新增用户</td></tr><tr><td>useradd -D</td><td>查看设置用户默认配置 /etc/default/useradd</td></tr><tr><td>/etc/login.defs</td><td>密码参数默认设置文件</td></tr><tr><td>/etc/skel/*</td><td>主目录源文件，其他用户文件夹初始化的根本</td></tr><tr><td>passwd [username</td><td>userid] [-l]</td></tr><tr><td>chage username</td><td>查看用户密码信息</td></tr><tr><td>usermod [-cdeg...] username</td><td>微调账号的信息</td></tr><tr><td>userdel [-r] username</td><td>删除用户的所有信息 -r 是连文件夹一起删除</td></tr><tr><td>finger username</td><td>列出用户信息</td></tr><tr><td>groupadd [-g gid] usergroupname</td><td>新增用户组</td></tr><tr><td>groupmod [-gn] username</td><td>微调用户组的信息</td></tr><tr><td>groupdel username</td><td>删除用户组</td></tr><tr><td>su username</td><td>切换用户</td></tr><tr><td>sudo [-u username] commond</td><td>以username为临时用户执行相关指令 没有指令就直接切换用户</td></tr><tr><td>visudo</td><td>/etc/sudoers 是当前用户是否可以进行sudo操作的配置文件 想让当前用户可以进行命令行的操作 修改这个文件 格式参考文件 root 分别是 用户账号【%开头的是用户组】、来源主机、可执行指令的绝对路径</td></tr></tbody></table><h3 id="进程"><a href="#进程" aria-hidden="true" class="header-anchor">#</a> 进程</h3><p>进程在linux里面是一个 pid ，系统每一个指令都是从当前 bash 衍生出来的进程，或者可以说是直接在父进程中拷贝一份，再以 exec 的方式来执行实际要进行的进程。 在一般状态下，衍生的进程会继承父进程的相关权限。在linux中每一个执行都会产生一个进程，只是很多进程执行很快。</p><h4 id="工作管理"><a href="#工作管理" aria-hidden="true" class="header-anchor">#</a> 工作管理</h4><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>commond &amp;</td><td>最后的&amp;可以让指令在后台执行</td></tr><tr><td>jobs [-lrs]</td><td>查看后台进程</td></tr><tr><td>[ctrl-z]</td><td>将进程放到后台并暂停</td></tr><tr><td>fg jobNumber</td><td>将后台的工作拿到前台处理</td></tr><tr><td>bg jobNumber</td><td>将被暂停执行的后台进程变成在后台执行</td></tr><tr><td>kill -signal[1,2,9,15] %jobNumber or pid</td><td>关闭后台进程</td></tr></tbody></table><h4 id="进程管理"><a href="#进程管理" aria-hidden="true" class="header-anchor">#</a> 进程管理</h4><pre class="language-text"><code>ps -l

F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
4 S     0 11200 11198  0  80   0 - 28881 do_wai pts/0    00:00:00 bash
0 R     0 11229 11200  0  80   0 - 37235 -      pts/0    00:00:00 ps

</code></pre><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>F</td><td>进程标志</td></tr><tr><td>S</td><td>进程状态 Running Sleep D[dead] T[stpo] Zombie</td></tr><tr><td>UID</td><td>用户id</td></tr><tr><td>PID</td><td>进程id</td></tr><tr><td>PPID</td><td>父进程id</td></tr><tr><td>C</td><td>cpu使用率</td></tr><tr><td>PRI</td><td>优先级</td></tr><tr><td>ADDR</td><td>内存相关，在内存的哪个位置</td></tr><tr><td>SZ</td><td>用掉多少内存</td></tr><tr><td>WCHAN</td><td>是否在进行中</td></tr><tr><td>TTY</td><td>登录者的终端机位置</td></tr><tr><td>TIME</td><td>使用cpu的时间</td></tr><tr><td>CMD</td><td>触发进程的命令</td></tr></tbody></table><pre class="language-text"><code>ps aux

USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.1  51472  3668 ?        Ss   Apr14   2:20 /usr/lib/systemd/systemd --switched-root --system --deserialize 21
root         2  0.0  0.0      0     0 ?        S    Apr14   0:00 [kthreadd]

</code></pre><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>%CPU</td><td>使用掉cpu百分比</td></tr><tr><td>%MEM</td><td>使用掉内存百分比</td></tr><tr><td>VSZ</td><td>使用虚拟内存量</td></tr><tr><td>RSS</td><td>占用的固定内存量</td></tr></tbody></table><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>ps aux</td><td>查看所有进程</td></tr><tr><td>ps -l</td><td>查看自己bash的进程</td></tr><tr><td>top [-d updateNum]</td><td>动态查看进程情况 在界面输入 P [以cpu占用排序] M [以内存占用排序] r[修改进程优先级]</td></tr><tr><td>pstree -pu</td><td>查看进程相关性，显示进程id及用户</td></tr><tr><td>kill -signal pid or %jobid</td><td>给进程或者job修改进程状态 -1 启动被终止的程序 -9 强行中断一个进程 -15 正常结束进程</td></tr><tr><td>killall -i -signal 服务指令</td><td>管理一个服务的 signal 会把服务相关的进程统一处理</td></tr></tbody></table><h4 id="调整进程优先级"><a href="#调整进程优先级" aria-hidden="true" class="header-anchor">#</a> 调整进程优先级</h4><ul><li><code>nice [-n 数字] commond</code> 数字的范围是 root:[-20 ~ 19], other:[0, 19] nice 为负值时优先级更高 这个指令只用于一开始执行程序时设定</li><li>同样的参数 为已经存在的进程调整优先级使用 <code>renice number pid</code></li></ul><h3 id="查看系统资源"><a href="#查看系统资源" aria-hidden="true" class="header-anchor">#</a> 查看系统资源</h3><table><thead><tr><th>指令</th><th>说明</th></tr></thead><tbody><tr><td>free -m or k or g -t</td><td>查看系统内存，-t 表示是否显示虚拟内存</td></tr><tr><td>uname</td><td>查看与内核相关的信息</td></tr><tr><td>netstat -tlnp</td><td>查看系统当前的监听状态</td></tr><tr><td>vmstat</td><td>检测系统资源变化</td></tr><tr><td>fuser</td><td>通过文件找到使用文件的进程</td></tr><tr><td>lsof</td><td>列出进程使用的文件名</td></tr><tr><td>pidof</td><td>找出正在执行的进程的 pid</td></tr></tbody></table><h3 id="selinux"><a href="#selinux" aria-hidden="true" class="header-anchor">#</a> SELinux</h3><blockquote><p>以进程为主体的，通过策略规则制定进程读取特定文件的一种安全强化的linux安全模式</p></blockquote><p>进程的访问权限被更好地限制了，文件或文件夹的权限不仅仅跟用户有关，同时也跟进程绑定在一起了</p><p><code>ls -Z</code></p><table><thead><tr><th>身份识别</th><th>角色</th><th>在 targetd 下的意义</th></tr></thead><tbody><tr><td>Root</td><td>system_r</td><td>代表 root 的账号登录时取得的权限</td></tr><tr><td>system_u</td><td>system_r</td><td>由于系统账号，因此是非交互的系统运行程序</td></tr><tr><td>user_u</td><td>system_r</td><td>一般可用户登录的进程</td></tr></tbody></table><p><code>/etc/selinux/config</code></p><h3 id="daemon"><a href="#daemon" aria-hidden="true" class="header-anchor">#</a> daemon</h3><blockquote><p>系统服务</p></blockquote><ul><li>进程所在的地址： /etc/init.d/daemon</li><li>进程状态： /etc/init.d/daemon status</li></ul><p>快捷方式</p><p>service [daemon] (start | stop | restart)</p><h3 id="服务的防火墙"><a href="#服务的防火墙" aria-hidden="true" class="header-anchor">#</a> 服务的防火墙</h3><p>修改这两个文件 <code>/etc/hosts.allow</code>(优先) 和 <code>/etc/hosts.deny</code></p><p><code>服务名称 : ip或域或主机名 : 操作</code></p><h3 id="查看系统的服务"><a href="#查看系统的服务" aria-hidden="true" class="header-anchor">#</a> 查看系统的服务</h3><p><code>netstat -tulp [win： netstat -aon]</code></p><pre class="language-text"><code>// window
netstat -ano | findstr 80

tasklist | findstr 2000

taskkill -PID &lt;进程号&gt; -F
</code></pre></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/Blog/src/reading/decortaor.html" class="prev">
          修饰模式(Decortaor)
        </a></span><span class="next"><a href="/Blog/src/tech/docker.html">
          docker 心路历程
        </a> →
      </span></p></div></div></div></div>
    <script src="/Blog/assets/js/2.11fec989.js" defer></script><script src="/Blog/assets/js/app.b978a6c9.js" defer></script>
  </body>
</html>
